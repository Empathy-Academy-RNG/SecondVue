{"remainingRequest":"/Users/raul/Desktop/FirstVue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raul/Desktop/FirstVue/src/views/Home.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/raul/Desktop/FirstVue/src/views/Home.vue","mtime":1616712490541},{"path":"/Users/raul/Desktop/FirstVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raul/Desktop/FirstVue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBNb3ZpZVBhbmVsIGZyb20gIkAvY29tcG9uZW50cy9Nb3ZpZVBhbmVsIjsKaW1wb3J0IFNlYXJjaEJveCBmcm9tICJAL2NvbXBvbmVudHMvU2VhcmNoQm94IjsKLy9pbXBvcnQgTW92aWVzSW50ZXJmYWNlIGZyb20gIi4uL21vZGVscy9pbnRlcmZhY2VzLnRzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGF3YWl0IHRoaXMuc2VhcmNoUmVxdWVzdCh0aGlzLmFsbFRleHRTZWFyY2gpOwogIH0sCiAgbWV0aG9kczogewogICAgc2VhcmNoUmVxdWVzdDogYXN5bmMgZnVuY3Rpb24odGV4dFRvU2VhcmNoKSB7CiAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgNjAwMCk7CiAgICAgIGlmICh0ZXh0VG9TZWFyY2ggIT09ICIiKSB7CiAgICAgICAgdGhpcy5jdXJyZW50VGV4dFNlYXJjaCA9IHRleHRUb1NlYXJjaDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN1cnJlbnRUZXh0U2VhcmNoID0gdGhpcy5hbGxUZXh0U2VhcmNoOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5jdXJyZW50VGV4dFNlYXJjaCA9IHRoaXMuY3VycmVudFRleHRTZWFyY2gudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9zZWFyY2gvIiArIHRoaXMuY3VycmVudFRleHRTZWFyY2gsCiAgICAgICAgICB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgfQogICAgICAgICk7CiAgICAgICAgY29uc3Qgc2VhcmNoRGF0YVJldHJpZXZlZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICB0aGlzLm1vdmllcyA9IHNlYXJjaERhdGFSZXRyaWV2ZWQuaXRlbXM7CiAgICAgICAgdGhpcy5zZWxlY3RlZE1vdmllRGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5pbml0aWFsU2VhcmNoU3RhdHVzID0gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgaWYgKGVyci5uYW1lID09PSAiQWJvcnRFcnJvciIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJSZXF1ZXN0IGFib3J0ZWQgZHVlIHRvIHRpbWVvdXQiKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWNjZXNzaW5nIHRoZSBzZWFyY2ggZGF0YTogIiArIGVyci50b1N0cmluZygpCiAgICAgICAgKTsKICAgICAgICB0aGlzLmluaXRpYWxTZWFyY2hTdGF0dXMgPSBmYWxzZTsKICAgICAgICB0aGlzLnNwZWNpZmljTW92aWVEYXRhU3RhdHVzID0gZmFsc2U7CiAgICAgICAgdGhpcy5zZWxlY3RlZE1vdmllRGF0YSA9IC0xOwogICAgICAgIHRoaXMubW92aWVzID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdE1vdmllOiBhc3luYyBmdW5jdGlvbihpbmRleENob3NlbikgewogICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDMwMDApOwogICAgICB0aGlzLnNlbGVjdGVkSUQgPSB0aGlzLm1vdmllc1tpbmRleENob3Nlbl0uaWQ7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYWxsTW92aWVEYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgKICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjMwMDAvbW92aWVzLyIgKyB0aGlzLnNlbGVjdGVkSUQsCiAgICAgICAgICB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgfQogICAgICAgICk7CiAgICAgICAgY29uc3QgcG9zdGVyRGF0YVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goCiAgICAgICAgICAiaHR0cDovL29tZGJhcGkuY29tLz9hcGlrZXk9NDkwYjIyNDYmaT0iICsgdGhpcy5zZWxlY3RlZElECiAgICAgICAgKTsKICAgICAgICBjb25zdCBvbWRiRGF0YVJldHJpZXZlZCA9IGF3YWl0IHBvc3RlckRhdGFSZXNwb25zZS5qc29uKCk7CiAgICAgICAgdGhpcy5zZWxlY3RlZE1vdmllRGF0YSA9IGF3YWl0IGFsbE1vdmllRGF0YVJlc3BvbnNlLmpzb24oKTsKICAgICAgICB0aGlzLiRzZXQoCiAgICAgICAgICB0aGlzLnNlbGVjdGVkTW92aWVEYXRhLAogICAgICAgICAgInBvc3RlclVybCIsCiAgICAgICAgICBvbWRiRGF0YVJldHJpZXZlZC5Qb3N0ZXIKICAgICAgICApOwogICAgICAgIHRoaXMuc3BlY2lmaWNNb3ZpZURhdGFTdGF0dXMgPSB0cnVlOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBpZiAoZXJyLm5hbWUgPT09ICJBYm9ydCBlcnJvciIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJSZXF1ZXN0IGFib3J0ZWQgZHVlIHRvIHRpbWVvdXQiKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGFjY2VzcyB0aGUgbW92aWUgZGF0YTogIiArCiAgICAgICAgICAgIGVyci50b1N0cmluZygpCiAgICAgICAgKTsKICAgICAgICB0aGlzLnNlbGVjdGVkTW92aWVEYXRhID0gLTE7CiAgICAgICAgdGhpcy5zcGVjaWZpY01vdmllRGF0YVN0YXR1cyA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGFsbFRleHRTZWFyY2g6ICJhdmVuZ2VycyIsCiAgICAgIGN1cnJlbnRUZXh0U2VhcmNoOiAiYXZlbmdlcnMiLAogICAgICBtb3ZpZXM6IG51bGwsCiAgICAgIHNlbGVjdGVkSUQ6IG51bGwsCiAgICAgIHNlbGVjdGVkTW92aWVEYXRhOiBudWxsLAogICAgICBpbml0aWFsU2VhcmNoU3RhdHVzOiB0cnVlLAogICAgICBzcGVjaWZpY01vdmllRGF0YVN0YXR1czogZmFsc2UKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBNb3ZpZVBhbmVsOiBNb3ZpZVBhbmVsLAogICAgU2VhcmNoQm94OiBTZWFyY2hCb3gKICB9Cn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <SearchBox v-on:search-change=\"searchRequest\"></SearchBox>\n    <div\n      v-if=\"movies || this.currentTextSearch !== ''\"\n      id=\"list-of-movies\"\n      data-test=\"list-of-movies\"\n    >\n      <ul id=\"main-list-movies\">\n        <li\n          class=\"movie-list-element\"\n          v-for=\"(movie, index) in movies\"\n          :key=\"movie.id\"\n          data-test=\"movie-list-item\"\n        >\n          <a\n            class=\"movie-list-link\"\n            @click.prevent=\"selectMovie(index)\"\n            href=\"\"\n            data-test=\"movie-list-link\"\n            >{{ movie.title }} ({{ movie.startYear }})</a\n          >\n        </li>\n      </ul>\n    </div>\n    <div v-if=\"!this.initialSearchStatus\" id=\"search-fail-panel\">\n      <img src=\"../assets/warning.png\" alt=\"\" id=\"search-fail-image\" />\n      <h1>Something went wrong, please try again.</h1>\n      <button\n        data-test=\"retry-btn\"\n        id=\"try-again-btn\"\n        @click.prevent=\"searchRequest(allTextSearch)\"\n      >\n        Search again\n      </button>\n    </div>\n    <div id=\"movie-info-panel\">\n      <MoviePanel :selected-movie-data=\"selectedMovieData\"></MoviePanel>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport MoviePanel from \"@/components/MoviePanel\";\nimport SearchBox from \"@/components/SearchBox\";\n//import MoviesInterface from \"../models/interfaces.ts\";\n\nexport default {\n  name: \"Home\",\n  async created() {\n    await this.searchRequest(this.allTextSearch);\n  },\n  methods: {\n    searchRequest: async function(textToSearch) {\n      let controller = new AbortController();\n      setTimeout(() => controller.abort(), 6000);\n      if (textToSearch !== \"\") {\n        this.currentTextSearch = textToSearch;\n      } else {\n        this.currentTextSearch = this.allTextSearch;\n      }\n      try {\n        this.currentTextSearch = this.currentTextSearch.toLowerCase();\n        const response = await fetch(\n          \"http://localhost:3000/search/\" + this.currentTextSearch,\n          { signal: controller.signal }\n        );\n        const searchDataRetrieved = await response.json();\n        this.movies = searchDataRetrieved.items;\n        this.selectedMovieData = null;\n        this.initialSearchStatus = true;\n      } catch (err) {\n        if (err.name === \"AbortError\") {\n          console.log(\"Request aborted due to timeout\");\n        }\n        console.log(\n          \"An error occurred while accessing the search data: \" + err.toString()\n        );\n        this.initialSearchStatus = false;\n        this.specificMovieDataStatus = false;\n        this.selectedMovieData = -1;\n        this.movies = null;\n      }\n    },\n    selectMovie: async function(indexChosen) {\n      let controller = new AbortController();\n      setTimeout(() => controller.abort(), 3000);\n      this.selectedID = this.movies[indexChosen].id;\n      try {\n        const allMovieDataResponse = await fetch(\n          \"http://localhost:3000/movies/\" + this.selectedID,\n          { signal: controller.signal }\n        );\n        const posterDataResponse = await fetch(\n          \"http://omdbapi.com/?apikey=490b2246&i=\" + this.selectedID\n        );\n        const omdbDataRetrieved = await posterDataResponse.json();\n        this.selectedMovieData = await allMovieDataResponse.json();\n        this.$set(\n          this.selectedMovieData,\n          \"posterUrl\",\n          omdbDataRetrieved.Poster\n        );\n        this.specificMovieDataStatus = true;\n      } catch (err) {\n        if (err.name === \"Abort error\") {\n          console.log(\"Request aborted due to timeout\");\n        }\n        console.log(\n          \"An error occurred while trying to access the movie data: \" +\n            err.toString()\n        );\n        this.selectedMovieData = -1;\n        this.specificMovieDataStatus = false;\n      }\n    }\n  },\n  data: function() {\n    return {\n      allTextSearch: \"avengers\",\n      currentTextSearch: \"avengers\",\n      movies: null,\n      selectedID: null,\n      selectedMovieData: null,\n      initialSearchStatus: true,\n      specificMovieDataStatus: false\n    };\n  },\n  components: {\n    MoviePanel: MoviePanel,\n    SearchBox: SearchBox\n  }\n};\n</script>\n<style>\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  background-image: linear-gradient(to right, blue, purple);\n  color: white;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n#list-of-movies {\n  width: 49.5%;\n  float: left;\n  text-align: center;\n}\n\n#main-list-movies {\n  border-right: 2px solid white;\n}\n\n#main-list-movies:empty {\n  border-right: 2px solid transparent;\n}\n\n#search-fail-panel {\n  margin-top: 40px;\n  width: 100%;\n  float: left;\n  text-align: center;\n  color: white;\n  position: fixed;\n  top: 190px;\n}\n\n#search-fail-image {\n  width: 8em;\n  filter: invert(100%);\n}\n\n#try-again-btn {\n  border: 1px solid white;\n  padding: 10px 20px;\n  color: white;\n  background-color: transparent;\n  font-family: Avenir, sans-serif;\n  font-size: 1em;\n}\n\n#try-again-btn:hover {\n  color: black;\n  background-color: white;\n  cursor: pointer;\n}\n\nul {\n  width: 100%;\n}\n\nli.movie-list-element {\n  list-style: none;\n  width: 80%;\n  text-align: center;\n  padding: 20px;\n  font-size: 1.25em;\n  height: 100px;\n}\n\na {\n  text-decoration: none;\n}\n\na.movie-list-link {\n  font-size: 1em;\n  padding: 10px;\n  color: white;\n  line-height: 2px;\n  border-bottom: 2px solid transparent;\n}\n\na.movie-list-link:hover {\n  border-bottom: 2px solid white;\n}\n\n@media (max-width: 1000px) {\n  #list-of-movies {\n    width: 50%;\n    border: none;\n  }\n}\n</style>\n"]}]}